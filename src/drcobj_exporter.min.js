/**
 * @author Blinking / https://blinking.fun/
 * MIT License
 * Copyright (c) 2019-2021 Blinking
 */
"use strict";THREE.DrcobjExporter=function(){function e(){}return e.prototype.parse=function(e,r){for(var t=0,o=this.drcParse(e,r=void 0===r?{}:r),n=0;n<e.geometries.length;n++){var a=o[n].byteLength;e.geometries[n].data={offset:t,byteLength:a},t+=a}var s=(p=JSON.stringify(e),new Uint8Array(function(e){for(var r,t=new Array,o=e.length,n=0;n<o;n++)65536<=(r=e.charCodeAt(n))&&r<=1114111?(t.push(r>>18&7|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):2048<=r&&r<=65535?(t.push(r>>12&15|224),t.push(r>>6&63|128),t.push(63&r|128)):128<=r&&r<=2047?(t.push(r>>6&31|192),t.push(63&r|128)):t.push(255&r);return t}(p)).buffer);h=new ArrayBuffer(4+s.byteLength+t);var i=new Uint32Array(h,0,1),p=new Uint8Array(h,4,s.byteLength),d=new Int8Array(h,4+s.byteLength,t);i[0]=s.byteLength,p.set(new Uint8Array(s));for(var h,u=0,f=0;u<o.length;u++)d.set(o[u],f),f+=o[u].byteLength;return r.isDeflate&&(r=new Uint8Array(h),h=new Zlib.Deflate(r).compress()),h},e.prototype.drcParse=function(e,r){var t=[],o=new THREE.DRACOExporter,n=new THREE.BufferGeometryLoader;void 0===r.decodeSpeed&&(r.decodeSpeed=5),void 0===r.encodeSpeed&&(r.encodeSpeed=5),void 0===r.encoderMethod&&(r.encoderMethod=THREE.DRACOExporter.MESH_EDGEBREAKER_ENCODING),void 0===r.quantization&&(r.quantization=[16,8,10,8,8]),void 0===r.exportUvs&&(r.exportUvs=!0),void 0===r.exportNormals&&(r.exportNormals=!0),void 0===r.exportColor&&(r.exportColor=!1);for(var a=0;a<e.geometries.length;a++){var s=n.parse(e.geometries[a]),s=o.parse(s,r);t.push(s)}return t},e}();
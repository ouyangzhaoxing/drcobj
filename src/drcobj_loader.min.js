/**
 * @author Blinking / https://blinking.fun/
 * MIT License
 * Copyright (c) 2019-2021 Blinking
 */
"use strict";THREE.DrcobjLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}e.prototype.setPath=function(e){this.path=e},e.prototype.setResourcePath=function(e){this.resourcePath=e},e.prototype.setDecoderPath=function(e){this.decoderPath=e},e.prototype.load=function(e,t,o,r,a,s){var i=this,n=void 0===this.path?d(e):this.path;this.resourcePath=this.resourcePath||n;n=new THREE.FileLoader(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.load(e,function(e){i.parse(e,t,r,s)},o,a)},e.prototype.parse=function(e,o,r,t){var d=this;void 0===d.objectLoader&&(d.objectLoader=new THREE.ObjectLoader),d.objectLoader.setResourcePath(this.resourcePath),void 0===d.dracoLoader&&(d.dracoLoader=new THREE.DRACOLoader,d.dracoLoader.setDecoderPath(d.decoderPath),d.dracoLoader.setDecoderConfig({type:"wasm"}),d.dracoLoader.setWorkerLimit(8)),t&&(e=new Zlib.Inflate(new Uint8Array(e)).decompress().buffer);for(var a,s,i,n=new Uint32Array(e,0,1)[0],t=new Uint8Array(e,4,n),c=JSON.parse(THREE.LoaderUtils.decodeText(t)),u=0,h=4+n,f=0;f<c.geometries.length;f++)!function(t){a=h+c.geometries[t].data.offset,s=a+c.geometries[t].data.byteLength,i=e.slice(a,s),d.dracoLoader.decodeDracoFile(i,function(e){e.uuid=c.geometries[t].uuid,void 0!==c.geometries[t].name&&(e.name=c.geometries[t].name),void 0!==c.geometries[t].userData&&(e.userData=c.geometries[t].userData),c.geometries[e.uuid]=e,++u,r&&r(u/c.geometries.length*100),u===c.geometries.length&&o&&function(e,t){var o=e.geometries,r=d.objectLoader.parseImages(e.images,function(){void 0!==t&&t(s)}),a=d.objectLoader.parseTextures(e.textures,r),a=d.objectLoader.parseMaterials(e.materials,a),s=d.objectLoader.parseObject(e.object,o,a,void 0);if(void 0!==t){var i,n=!1;for(i in r)if(r[i]instanceof HTMLImageElement){n=!0;break}!1===n&&t(s)}}(c,o)})}(f)},e.prototype.dispose=function(){this.dracoLoader.dispose()};var d=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};return e}();